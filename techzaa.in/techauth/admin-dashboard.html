<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Packaging Glamour HR</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico" />

    <!-- Tailwind CSS (Local) -->
    <link rel="stylesheet" href="assets/css/tailwind.css" />

    <!-- Button Styles -->
    <link rel="stylesheet" href="assets/css/button-styles.css?v=6" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Configuration Script - Load FIRST -->
    <script src="config-worker.js?v=4"></script>
    <!-- Authentication Script -->
    <script src="auth.js"></script>

    <style>
      body {
        font-family: "Montserrat", sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #e8eef5 100%);
      }

      /* Modal Styles - Bootstrap-inspired */
      .modal {
        display: none;
        position: fixed;
        z-index: 1050;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(1px);
        animation: fadeIn 0.15s ease-in-out;
        align-items: center;
        justify-content: center;
      }
      .modal.active {
        display: flex !important;
      }
      .modal-dialog {
        position: relative;
        width: auto;
        margin: 1.75rem auto;
        pointer-events: none;
      }
      .modal-dialog-centered {
        display: flex;
        align-items: center;
        min-height: calc(100% - 3.5rem);
      }
      .modal-content {
        position: relative;
        display: flex;
        flex-direction: column;
        width: 100%;
        pointer-events: auto;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 0.5rem;
        outline: 0;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
      }

      /* Tab Styles */
      .tab-active {
        border-bottom: 4px solid #dc2626;
        color: #dc2626;
        background: linear-gradient(
          to bottom,
          rgba(220, 38, 38, 0.05),
          transparent
        );
        font-weight: 600;
      }

      /* Enhanced Card Shadows */
      .card-elevated {
        box-shadow:
          0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06),
          0 0 0 1px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }
      .card-elevated:hover {
        box-shadow:
          0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transform: translateY(-2px);
      }

      /* Gradient Buttons */
      .btn-gradient-red {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        transition: all 0.3s ease;
      }
      .btn-gradient-red:hover {
        background: linear-gradient(135deg, #b91c1c 0%, #991b1b 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
      }

      .btn-gradient-green {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        transition: all 0.3s ease;
      }
      .btn-gradient-green:hover {
        background: linear-gradient(135deg, #15803d 0%, #166534 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(22, 163, 74, 0.4);
      }

      .btn-gradient-blue {
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        transition: all 0.3s ease;
      }
      .btn-gradient-blue:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
      }

      /* Statistics Card Gradients */
      .stat-card-red {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        border-left: 4px solid #dc2626;
      }
      .stat-card-green {
        background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
        border-left: 4px solid #16a34a;
      }
      .stat-card-blue {
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        border-left: 4px solid #2563eb;
      }
      .stat-card-yellow {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border-left: 4px solid #f59e0b;
      }
      .stat-card-purple {
        background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
        border-left: 4px solid #9333ea;
      }

      /* Table Row Hover */
      .table-row-hover {
        transition: all 0.2s ease;
      }
      .table-row-hover:hover {
        background-color: #f9fafb !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transform: scale(1.01);
      }

      /* Badge Styles */
      .badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 600;
        transition: all 0.2s ease;
      }
      .badge:hover {
        transform: scale(1.05);
      }

      /* Loading Animation */
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .animate-spin {
        animation: spin 1s linear infinite;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .slide-up {
        animation: slideUp 0.4s ease-out;
      }

      /* Input Focus Styles */
      input:focus,
      select:focus,
      textarea:focus {
        outline: none;
        border-color: #dc2626;
        box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
      }

      /* Scrollbar Styles */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      /* Navbar Enhancement */
      nav {
        background: linear-gradient(to right, #ffffff 0%, #fafafa 100%);
        border-bottom: 2px solid #e5e7eb;
      }

      /* Page Header */
      .page-header {
        background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
        border-left: 5px solid #dc2626;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      /* Toast Notification System */
      #toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 12px;
        max-width: 400px;
      }

      .toast {
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        padding: 16px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 300px;
        animation: slideInRight 0.3s ease-out;
        border-left: 5px solid;
      }

      .toast.success {
        border-left-color: #16a34a;
      }

      .toast.error {
        border-left-color: #dc2626;
      }

      .toast.warning {
        border-left-color: #f59e0b;
      }

      .toast.info {
        border-left-color: #2563eb;
      }

      .toast-icon {
        font-size: 24px;
        flex-shrink: 0;
      }

      .toast.success .toast-icon {
        color: #16a34a;
      }

      .toast.error .toast-icon {
        color: #dc2626;
      }

      .toast.warning .toast-icon {
        color: #f59e0b;
      }

      .toast.info .toast-icon {
        color: #2563eb;
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 4px;
        color: #1f2937;
      }

      .toast-message {
        font-size: 13px;
        color: #6b7280;
        line-height: 1.4;
      }

      .toast-close {
        background: none;
        border: none;
        color: #9ca3af;
        font-size: 20px;
        cursor: pointer;
        padding: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: all 0.2s;
        flex-shrink: 0;
      }

      .toast-close:hover {
        background: #f3f4f6;
        color: #4b5563;
      }

      @keyframes slideInRight {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }

      .toast.removing {
        animation: slideOutRight 0.3s ease-in forwards;
      }

      /* Mobile responsive */
      @media (max-width: 640px) {
        #toast-container {
          right: 10px;
          left: 10px;
          max-width: none;
        }

        .toast {
          min-width: auto;
        }
      }

      /* New Button Styles with Ripple Effect */
      .button {
        display: inline-flex;
        align-items: center;
        padding: 8px 16px;
        border: 1px solid #4f4f4f;
        border-radius: 4px;
        transition: all 0.2s ease-in;
        position: relative;
        overflow: hidden;
        font-size: 14px;
        cursor: pointer;
        color: black;
        z-index: 1;
        background: transparent;
        font-weight: 600;
        white-space: nowrap;
      }

      /* Small button variant */
      .button-sm {
        padding: 4px 10px;
        font-size: 12px;
      }

      .button:before {
        content: "";
        position: absolute;
        left: 50%;
        transform: translateX(-50%) scaleY(1) scaleX(1.25);
        top: 100%;
        width: 140%;
        height: 180%;
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 50%;
        display: block;
        transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
        z-index: -1;
      }

      .button:after {
        content: "";
        position: absolute;
        left: 55%;
        transform: translateX(-50%) scaleY(1) scaleX(1.45);
        top: 180%;
        width: 160%;
        height: 190%;
        background-color: #39bda7;
        border-radius: 50%;
        display: block;
        transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
        z-index: -1;
      }

      .button:hover {
        color: #ffffff;
        border: 1px solid #39bda7;
      }

      .button:hover:before {
        top: -35%;
        background-color: #39bda7;
        transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
      }

      .button:hover:after {
        top: -45%;
        background-color: #39bda7;
        transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
      }

      /* Button variants */
      .button-red:after,
      .button-red:before {
        background-color: #dc2626;
      }

      .button-red:hover {
        border-color: #dc2626;
      }

      .button-red:hover:before,
      .button-red:hover:after {
        background-color: #dc2626;
      }

      .button-green:after,
      .button-green:before {
        background-color: #16a34a;
      }

      .button-green:hover {
        border-color: #16a34a;
      }

      .button-green:hover:before,
      .button-green:hover:after {
        background-color: #16a34a;
      }

      .button-blue:after,
      .button-blue:before {
        background-color: #2563eb;
      }

      .button-blue:hover {
        border-color: #2563eb;
      }

      .button-blue:hover:before,
      .button-blue:hover:after {
        background-color: #2563eb;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen">
    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
      <div class="container mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
          <!-- Logo -->
          <div class="flex items-center space-x-3">
            <img src="assets/images/logo_red.png" alt="Logo" class="h-10" />
          </div>

          <!-- Sign Out Button (Desktop & Mobile) -->
          <div class="flex items-center space-x-4">
            <button onclick="logout()" class="text-gray-600 hover:text-red-600">
              <i class="fas fa-sign-out-alt mr-1"></i> Logout
            </button>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="mb-8 page-header rounded-xl p-6 slide-up">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <div>
            <h2 class="text-4xl font-bold text-gray-800 mb-2">
              <i class="fas fa-tachometer-alt text-red-600 mr-3"></i>Admin
              Dashboard
            </h2>
            <p class="text-gray-600 text-lg">
              Manage employees, attendance, payroll, and system settings
            </p>
          </div>
          <div class="flex items-center space-x-4">
            <div class="text-right">
              <p class="text-xs text-gray-500 uppercase tracking-wide">
                Last Updated
              </p>
              <span
                class="text-sm font-semibold text-gray-700"
                id="lastRefreshTime"
                >--</span
              >
            </div>
            <button
              onclick="manualRefresh()"
              class="button button-blue flex items-center space-x-2"
              id="refreshBtn"
            >
              <i class="fas fa-sync-alt"></i>
              <span>Refresh Data</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="bg-white rounded-xl shadow-xl mb-6 card-elevated">
        <div class="flex border-b border-gray-200 overflow-x-auto">
          <button
            onclick="switchTab('employees')"
            id="tab-employees"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 tab-active whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-users mr-2 text-lg"></i> Employees
          </button>
          <button
            onclick="switchTab('medical')"
            id="tab-medical"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-notes-medical mr-2 text-lg"></i> Medical Claims
          </button>
          <button
            onclick="switchTab('leave')"
            id="tab-leave"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-calendar-check mr-2 text-lg"></i> Leave Management
          </button>
          <button
            onclick="switchTab('attendance')"
            id="tab-attendance"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-clock mr-2 text-lg"></i> Attendance
          </button>
          <button
            onclick="switchTab('announcements')"
            id="tab-announcements"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-bullhorn mr-2 text-lg"></i> Announcements
          </button>
          <button
            onclick="switchTab('payroll')"
            id="tab-payroll"
            class="flex-1 py-5 px-6 font-semibold text-gray-700 hover:bg-gray-50 whitespace-nowrap transition-all duration-200"
          >
            <i class="fas fa-money-check-alt mr-2 text-lg"></i> Payroll
          </button>
        </div>
      </div>

      <!-- Employee Management Tab -->
      <div id="content-employees" class="tab-content slide-up">
        <div class="bg-white rounded-xl shadow-xl p-8 card-elevated">
          <div class="flex justify-between items-center mb-8">
            <div>
              <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                <i class="fas fa-users text-red-600 mr-3"></i>
                All Employees
              </h3>
              <p class="text-sm text-gray-600 mt-2">
                <span
                  class="bg-red-100 text-red-800 px-3 py-1 rounded-full font-semibold"
                >
                  <span id="totalEmployeesCount">0</span> Total
                </span>
              </p>
            </div>
            <button onclick="openAddEmployeeModal()" class="button button-red">
              <i class="fas fa-user-plus mr-2"></i>Add Employee
            </button>
          </div>

          <!-- Search and Filter -->
          <div class="mb-4 flex gap-4">
            <input
              type="text"
              id="employeeSearch"
              onkeyup="filterEmployees()"
              placeholder="Search by name or email..."
              class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
            <select
              id="departmentFilter"
              onchange="filterEmployees()"
              class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            >
              <option value="">All Departments</option>
              <option value="Administration">Administration</option>
              <option value="Management">Management</option>
              <option value="Production">Production</option>
              <option value="Operations">Operations</option>
              <option value="Customer Service">Customer Service</option>
              <option value="Creative Design">Creative Design</option>
              <option value="Logistics">Logistics</option>
              <option value="Warehousing & Fulfilment">
                Warehousing & Fulfilment
              </option>
              <option value="Finance">Finance</option>
              <option value="Sales">Sales</option>
              <option value="Marketing">Marketing</option>
              <option value="Engineering">Engineering</option>
            </select>
          </div>

          <!-- Employees Table -->
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Name
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Job Title
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Department
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Employment Type
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Role
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody
                id="employeesTableBody"
                class="bg-white divide-y divide-gray-200"
              >
                <tr>
                  <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                    <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                    <p>Loading employees...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Medical Claims Tab -->
      <div id="content-medical" class="tab-content hidden">
        <div
          class="bg-white rounded-lg shadow-lg overflow-hidden"
          style="height: calc(100vh - 250px)"
        >
          <iframe
            src="admin-medical-claims.html"
            class="w-full h-full border-0"
            title="Medical Claims Management"
          ></iframe>
        </div>
      </div>

      <!-- Leave Approvals Tab -->
      <div id="content-leave" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">Leave Management</h3>

            <!-- View Toggle -->
            <div class="flex bg-gray-100 rounded-lg p-1">
              <button
                onclick="toggleLeaveView('list')"
                id="leaveViewList"
                class="px-4 py-2 bg-white text-red-600 rounded-lg font-semibold shadow-sm transition-all"
              >
                <i class="fas fa-list mr-2"></i>List View
              </button>
              <button
                onclick="toggleLeaveView('calendar')"
                id="leaveViewCalendar"
                class="px-4 py-2 text-gray-700 rounded-lg font-semibold transition-all"
              >
                <i class="fas fa-calendar mr-2"></i>Upcoming Leaves
              </button>
            </div>
          </div>

          <!-- List View -->
          <div id="leaveListView">
            <!-- Filter Tabs for Leave Status -->
            <div class="mb-6 flex space-x-2">
              <button
                onclick="filterLeaveRequests('all')"
                id="leaveFilterAll"
                class="px-4 py-2 bg-red-600 text-white rounded-lg font-semibold"
              >
                All Leave
              </button>
              <button
                onclick="filterLeaveRequests('pending')"
                id="leaveFilterPending"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
              >
                Pending
              </button>
              <button
                onclick="filterLeaveRequests('approved')"
                id="leaveFilterApproved"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
              >
                Approved
              </button>
              <button
                onclick="filterLeaveRequests('rejected')"
                id="leaveFilterRejected"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300"
              >
                Rejected
              </button>
            </div>

            <!-- Leave Requests Table -->
            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Employee
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Leave Type
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Start Date
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      End Date
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Days
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Reason
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Actions
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="leaveRequestsBody"
                  class="bg-white divide-y divide-gray-200"
                >
                  <tr>
                    <td
                      colspan="7"
                      class="px-6 py-12 text-center text-gray-500"
                    >
                      <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                      <p>Loading leave requests...</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Upcoming Leaves View -->
          <div id="leaveCalendarView" class="hidden">
            <!-- Header -->
            <div class="mb-6">
              <h3 class="text-2xl font-bold text-gray-900">Upcoming Leaves</h3>
              <p class="text-gray-600 mt-1">
                Approved leaves scheduled for the next 30 days
              </p>
            </div>

            <!-- Filters -->
            <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Date Range
                </label>
                <select
                  id="leaveDateRangeFilter"
                  onchange="filterUpcomingLeaves()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="7">Next 7 Days</option>
                  <option value="30" selected>Next 30 Days</option>
                  <option value="60">Next 60 Days</option>
                  <option value="90">Next 90 Days</option>
                  <option value="custom">Custom Range</option>
                </select>
              </div>

              <div id="customDateStart" class="hidden">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Start Date
                </label>
                <input
                  type="date"
                  id="leaveStartDate"
                  onchange="filterUpcomingLeaves()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>

              <div id="customDateEnd" class="hidden">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  End Date
                </label>
                <input
                  type="date"
                  id="leaveEndDate"
                  onchange="filterUpcomingLeaves()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Department
                </label>
                <select
                  id="leaveDepartmentFilter"
                  onchange="filterUpcomingLeaves()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="">All Departments</option>
                  <option value="Administration">Administration</option>
                  <option value="Management">Management</option>
                  <option value="Production">Production</option>
                  <option value="Operations">Operations</option>
                  <option value="Customer Service">Customer Service</option>
                  <option value="Creative Design">Creative Design</option>
                  <option value="Logistics">Logistics</option>
                  <option value="Warehousing & Fulfilment">
                    Warehousing & Fulfilment
                  </option>
                  <option value="Finance">Finance</option>
                  <option value="Sales">Sales</option>
                  <option value="Marketing">Marketing</option>
                  <option value="Engineering">Engineering</option>
                </select>
              </div>
            </div>

            <!-- Summary Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-blue-700 font-medium">
                      On Leave Today
                    </p>
                    <p
                      id="onLeaveToday"
                      class="text-3xl font-bold text-blue-900"
                    >
                      0
                    </p>
                  </div>
                  <i class="fas fa-calendar-day text-3xl text-blue-400"></i>
                </div>
              </div>
              <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-green-700 font-medium">
                      Next 7 Days
                    </p>
                    <p
                      id="onLeaveWeek"
                      class="text-3xl font-bold text-green-900"
                    >
                      0
                    </p>
                  </div>
                  <i class="fas fa-calendar-week text-3xl text-green-400"></i>
                </div>
              </div>
              <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-purple-700 font-medium">
                      Next 30 Days
                    </p>
                    <p
                      id="onLeaveMonth"
                      class="text-3xl font-bold text-purple-900"
                    >
                      0
                    </p>
                  </div>
                  <i class="fas fa-calendar-alt text-3xl text-purple-400"></i>
                </div>
              </div>
            </div>

            <!-- Upcoming Leaves List -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
              <div class="px-6 py-4 bg-gray-50 border-b border-gray-200">
                <h4 class="text-lg font-bold text-gray-900">Leave Schedule</h4>
              </div>
              <div id="upcomingLeavesList" class="divide-y divide-gray-200">
                <!-- JavaScript will populate this -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Attendance Records Tab -->
      <div id="content-attendance" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">Attendance Records</h3>
            <button
              onclick="exportAttendanceReport()"
              class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-200"
            >
              <i class="fas fa-download mr-2"></i> Export Report
            </button>
          </div>

          <!-- Statistics Cards -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Present Today</p>
                  <p
                    id="statPresentToday"
                    class="text-2xl font-bold text-green-600"
                  >
                    0
                  </p>
                </div>
                <i class="fas fa-user-check text-3xl text-green-600"></i>
              </div>
            </div>
            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Late Today</p>
                  <p
                    id="statLateToday"
                    class="text-2xl font-bold text-yellow-600"
                  >
                    0
                  </p>
                </div>
                <i class="fas fa-clock text-3xl text-yellow-600"></i>
              </div>
            </div>
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Avg Hours</p>
                  <p id="statAvgHours" class="text-2xl font-bold text-blue-600">
                    0h
                  </p>
                </div>
                <i class="fas fa-hourglass-half text-3xl text-blue-600"></i>
              </div>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Attendance Rate</p>
                  <p
                    id="statAttendanceRate"
                    class="text-2xl font-bold text-purple-600"
                  >
                    0%
                  </p>
                </div>
                <i class="fas fa-chart-line text-3xl text-purple-600"></i>
              </div>
            </div>
          </div>

          <!-- Date Filter -->
          <div class="mb-4 flex gap-4 flex-wrap">
            <div>
              <label class="block text-xs text-gray-600 mb-1">Date Range</label>
              <select
                id="attendanceDateRange"
                onchange="loadAttendanceRecords()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="today">Today</option>
                <option value="week">This Week</option>
                <option value="month" selected>This Month</option>
                <option value="custom">Custom Date</option>
              </select>
            </div>
            <div id="customDateContainer" class="hidden">
              <label class="block text-xs text-gray-600 mb-1"
                >Select Date</label
              >
              <input
                type="date"
                id="attendanceDate"
                onchange="loadAttendanceRecords()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-xs text-gray-600 mb-1">Employee</label>
              <select
                id="attendanceEmployeeFilter"
                onchange="loadAttendanceRecords()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="">All Employees</option>
              </select>
            </div>
            <div>
              <label class="block text-xs text-gray-600 mb-1">Status</label>
              <select
                id="attendanceStatusFilter"
                onchange="loadAttendanceRecords()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="">All Status</option>
                <option value="present">Present</option>
                <option value="late">Late</option>
                <option value="incomplete">Incomplete</option>
              </select>
            </div>
          </div>

          <!-- Attendance Table -->
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Employee
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Date
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Check In
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Check Out
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Hours
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Status
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    IP Address
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Location
                  </th>
                </tr>
              </thead>
              <tbody
                id="attendanceRecordsBody"
                class="bg-white divide-y divide-gray-200"
              >
                <tr>
                  <td colspan="8" class="px-6 py-12 text-center text-gray-500">
                    <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                    <p>Loading attendance records...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Announcements Tab -->
      <div id="content-announcements" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-800">
              Manage Announcements
            </h3>
            <button
              onclick="openAddAnnouncementModal()"
              class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-200"
            >
              <i class="fas fa-plus mr-2"></i> New Announcement
            </button>
          </div>

          <!-- Filter -->
          <div class="mb-4">
            <select
              id="announcementFilter"
              onchange="loadAnnouncements()"
              class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            >
              <option value="all">All Announcements</option>
              <option value="High">High Priority</option>
              <option value="Medium">Medium Priority</option>
              <option value="Low">Low Priority</option>
            </select>
          </div>

          <!-- Announcements List -->
          <div id="announcementsContainer" class="space-y-4">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Payroll Management Tab -->
      <div id="content-payroll" class="tab-content hidden slide-up">
        <div class="bg-white rounded-xl shadow-xl p-8 card-elevated">
          <div class="flex justify-between items-center mb-8 flex-wrap gap-4">
            <h3 class="text-2xl font-bold text-gray-800 flex items-center">
              <i class="fas fa-money-check-alt text-red-600 mr-3"></i>
              Payroll Records
            </h3>
            <div class="flex gap-3">
              <button
                onclick="autoGeneratePayroll()"
                class="button button-green"
                title="Auto-generate payroll for all employees based on previous month"
              >
                <i class="fas fa-magic mr-2"></i> Auto-Generate
              </button>
              <button onclick="openAddPayrollModal()" class="button button-red">
                <i class="fas fa-plus mr-2"></i> Create Payroll
              </button>
            </div>
          </div>

          <!-- Filters -->
          <div class="mb-4 flex gap-4 flex-wrap">
            <div class="flex-1 min-w-[200px]">
              <label class="block text-xs text-gray-600 mb-1"
                >Search Employee</label
              >
              <input
                type="text"
                id="payrollEmployeeSearch"
                placeholder="Search by name..."
                oninput="filterPayrollByEmployee()"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-xs text-gray-600 mb-1">Month</label>
              <input
                type="month"
                id="payrollMonthFilter"
                onchange="filterPayrollByMonth()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-xs text-gray-600 mb-1">Status</label>
              <select
                id="payrollStatusFilter"
                onchange="filterPayrollByStatus()"
                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="">All Statuses</option>
                <option value="Draft">Draft</option>
                <option value="Processed">Processed</option>
                <option value="Paid">Paid</option>
                <option value="Pending">Pending</option>
              </select>
            </div>
            <div class="flex items-end">
              <button
                onclick="clearPayrollFilters()"
                class="button button-red button-sm"
              >
                <i class="fas fa-times mr-1"></i> Clear
              </button>
            </div>
          </div>

          <!-- Payroll Table -->
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Employee
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Month
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Basic Salary
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Total Allowances
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Total Deductions
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Net Salary
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody
                id="payrollTableBody"
                class="bg-white divide-y divide-gray-200"
              >
                <tr>
                  <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                    <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                    <p>Loading payroll records...</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Employee Modal -->
    <div id="employeeModal" class="modal">
      <div
        class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"
      >
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-2xl font-bold text-gray-800" id="modalTitle">
            Add Employee
          </h3>
          <button
            onclick="closeEmployeeModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="employeeForm" class="p-6 space-y-4">
          <input type="hidden" id="employeeId" />
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Full Name *</label
              >
              <input
                type="text"
                id="empFullName"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Employee ID *</label
              >
              <input
                type="text"
                id="empEmployeeId"
                required
                placeholder="e.g., EMP001"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Email *</label
              >
              <input
                type="email"
                id="empEmail"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Status *</label
              >
              <select
                id="empStatus"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="">Select Status</option>
                <option value="Permanent">Permanent</option>
                <option value="Intern">Intern</option>
                <option value="National Service Personnel">
                  National Service Personnel
                </option>
                <option value="Independent Contractor">
                  Independent Contractor
                </option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Role *</label
              >
              <select
                id="empRole"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="Employee">Employee</option>
                <option value="Admin">Admin</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Password *</label
              >
              <input
                type="password"
                id="empPassword"
                required
                minlength="6"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                placeholder="Min. 6 characters"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Confirm Password *</label
              >
              <input
                type="password"
                id="empConfirmPassword"
                required
                minlength="6"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                placeholder="Min. 6 characters"
              />
            </div>
          </div>

          <!-- Employment Details Section -->
          <div class="border-t pt-4 mt-4">
            <h4 class="text-lg font-semibold text-gray-800 mb-4">
              Employment Details
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Job Title</label
                >
                <input
                  type="text"
                  id="empJobTitle"
                  placeholder="e.g., Software Engineer"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Department</label
                >
                <select
                  id="empDepartment"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="">Select Department</option>
                  <option value="Administration">Administration</option>
                  <option value="Management">Management</option>
                  <option value="Production">Production</option>
                  <option value="Operations">Operations</option>
                  <option value="Customer Service">Customer Service</option>
                  <option value="Creative Design">Creative Design</option>
                  <option value="Logistics">Logistics</option>
                  <option value="Warehousing & Fulfilment">
                    Warehousing & Fulfilment
                  </option>
                  <option value="Finance">Finance</option>
                  <option value="Sales">Sales</option>
                  <option value="Marketing">Marketing</option>
                  <option value="Engineering">Engineering</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Employment Type</label
                >
                <select
                  id="empEmploymentType"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="">Select Type</option>
                  <option value="Full-time">Full-time</option>
                  <option value="Part-time">Part-time</option>
                  <option value="Contract">Contract</option>
                  <option value="Temporary">Temporary</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Joining Date</label
                >
                <input
                  type="date"
                  id="empJoiningDate"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Monthly Salary (GH)</label
                >
                <input
                  type="number"
                  id="empSalary"
                  step="0.01"
                  placeholder="0.00"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>
          </div>

          <!-- Bank Details Section -->
          <div class="border-t pt-4 mt-4">
            <h4 class="text-lg font-semibold text-gray-800 mb-4">
              Bank Details
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Bank Name</label
                >
                <input
                  type="text"
                  id="empBankName"
                  placeholder="e.g., GCB Bank"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Bank Account Number</label
                >
                <input
                  type="text"
                  id="empBankAccountNumber"
                  placeholder="e.g., 1234567890"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Bank Branch</label
                >
                <input
                  type="text"
                  id="empBankBranch"
                  placeholder="e.g., Accra Main"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>
          </div>

          <!-- Personal Details Section -->
          <div class="border-t pt-4 mt-4">
            <h4 class="text-lg font-semibold text-gray-800 mb-4">
              Personal Details
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Phone Number</label
                >
                <input
                  type="tel"
                  id="empPhoneNumber"
                  placeholder="e.g., 0241234567"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Date of Birth</label
                >
                <input
                  type="date"
                  id="empDateOfBirth"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Ghana Card Number</label
                >
                <input
                  type="text"
                  id="empGhanaCardNumber"
                  placeholder="e.g., GHA-123456789-0"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Social Security Number</label
                >
                <input
                  type="text"
                  id="empSocialSecurityNumber"
                  placeholder="e.g., C123456789012"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >City</label
                >
                <input
                  type="text"
                  id="empCity"
                  placeholder="e.g., Accra"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Country</label
                >
                <input
                  type="text"
                  id="empCountry"
                  placeholder="e.g., Ghana"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Address</label
                >
                <textarea
                  id="empAddress"
                  rows="2"
                  placeholder="e.g., House 123, Street Name"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                ></textarea>
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closeEmployeeModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200"
            >
              Save Employee
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Attendance Modal -->
    <div id="attendanceModal" class="modal">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-2xl font-bold text-gray-800">Edit Attendance</h3>
          <button
            onclick="closeAttendanceModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="attendanceForm" class="p-6 space-y-4">
          <input type="hidden" id="attendanceId" />
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Employee</label
            >
            <input
              type="text"
              id="attEmployee"
              readonly
              class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Date</label
            >
            <input
              type="date"
              id="attDate"
              readonly
              class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Check In Time</label
            >
            <input
              type="time"
              id="attCheckIn"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Check Out Time</label
            >
            <input
              type="time"
              id="attCheckOut"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>
          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closeAttendanceModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200"
            >
              Update
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Announcement Modal -->
    <div id="announcementModal" class="modal">
      <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4">
        <div class="flex justify-between items-center p-6 border-b">
          <h3
            class="text-2xl font-bold text-gray-800"
            id="announcementModalTitle"
          >
            New Announcement
          </h3>
          <button
            onclick="closeAnnouncementModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="announcementForm" class="p-6 space-y-4">
          <input type="hidden" id="announcementId" />
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Title *</label
            >
            <input
              type="text"
              id="annTitle"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Message *</label
            >
            <textarea
              id="annMessage"
              rows="5"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            ></textarea>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Priority *</label
            >
            <select
              id="annPriority"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            >
              <option value="Low">Low</option>
              <option value="Medium" selected>Medium</option>
              <option value="High">High</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Image (Optional)</label
            >
            <input
              type="file"
              id="annImageFile"
              accept="image/*"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
            <p class="text-sm text-gray-500 mt-1">
              Upload an image (JPG, PNG, GIF - max 5MB). Image will be hosted on
              Cloudinary.
            </p>
            <div id="imagePreview" class="mt-2 hidden">
              <img
                id="previewImg"
                class="max-w-xs h-auto rounded-lg border border-gray-300"
              />
            </div>
          </div>
          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closeAnnouncementModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200"
            >
              <i class="fas fa-paper-plane mr-2"></i> Post Announcement
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Announcement Stats Modal -->
    <div id="announcementStatsModal" class="modal">
      <div
        class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"
      >
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-2xl font-bold text-gray-800">
            <i class="fas fa-chart-bar text-green-600 mr-2"></i>
            Announcement Analytics
          </h3>
          <button
            onclick="closeAnnouncementStatsModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <div class="p-6">
          <!-- Announcement Info -->
          <div class="mb-6 p-4 bg-gray-50 rounded-lg">
            <h4
              id="statsAnnouncementTitle"
              class="text-xl font-bold text-gray-800 mb-2"
            ></h4>
            <p
              id="statsAnnouncementMessage"
              class="text-sm text-gray-600 whitespace-pre-wrap"
            ></p>
          </div>

          <!-- Statistics Summary -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-blue-600 font-medium">Total Views</p>
                  <p
                    id="statsViewCount"
                    class="text-3xl font-bold text-blue-700"
                  >
                    0
                  </p>
                </div>
                <i class="fas fa-eye text-blue-400 text-3xl"></i>
              </div>
            </div>
            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-green-600 font-medium">
                    Total Comments
                  </p>
                  <p
                    id="statsCommentCount"
                    class="text-3xl font-bold text-green-700"
                  >
                    0
                  </p>
                </div>
                <i class="fas fa-comments text-green-400 text-3xl"></i>
              </div>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-purple-600 font-medium">
                    Engagement Rate
                  </p>
                  <p
                    id="statsEngagementRate"
                    class="text-3xl font-bold text-purple-700"
                  >
                    0%
                  </p>
                </div>
                <i class="fas fa-chart-line text-purple-400 text-3xl"></i>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="border-b mb-4">
            <div class="flex space-x-4">
              <button
                id="viewsTab"
                onclick="switchStatsTab('views')"
                class="px-4 py-2 font-semibold border-b-2 border-blue-600 text-blue-600"
              >
                <i class="fas fa-eye mr-2"></i>Views
              </button>
              <button
                id="commentsTab"
                onclick="switchStatsTab('comments')"
                class="px-4 py-2 font-semibold text-gray-600 hover:text-gray-800"
              >
                <i class="fas fa-comments mr-2"></i>Comments
              </button>
            </div>
          </div>

          <!-- Views List -->
          <div id="viewsContent">
            <h5 class="font-bold text-gray-800 mb-3">
              <i class="fas fa-users mr-2"></i>Employees Who Viewed
            </h5>
            <div id="viewsList" class="space-y-2 max-h-96 overflow-y-auto">
              <!-- Views will be loaded here -->
            </div>
          </div>

          <!-- Comments List -->
          <div id="commentsContent" class="hidden">
            <h5 class="font-bold text-gray-800 mb-3">
              <i class="fas fa-comment-dots mr-2"></i>All Comments
            </h5>
            <div
              id="statsCommentsList"
              class="space-y-3 max-h-96 overflow-y-auto"
            >
              <!-- Comments will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Payroll Modal -->
    <div id="payrollModal" class="modal">
      <div
        class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"
      >
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-2xl font-bold text-gray-800" id="payrollModalTitle">
            Create Payroll
          </h3>
          <button
            onclick="closePayrollModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="payrollForm" class="p-6 space-y-6">
          <input type="hidden" id="payrollId" />

          <!-- Basic Information -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Employee *</label
              >
              <select
                id="payrollEmployee"
                required
                onchange="loadPreviousMonthsForEmployee()"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              >
                <option value="">Select Employee</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Month *</label
              >
              <input
                type="month"
                id="payrollMonth"
                required
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Copy from Previous Month</label
              >
              <select
                id="copyFromMonth"
                onchange="copyFromPreviousMonth()"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50"
              >
                <option value="">-- Select to copy --</option>
              </select>
            </div>
          </div>

          <!-- Pay Cycle and Period Information -->
          <div class="border-t pt-4 mt-4">
            <h4
              class="text-lg font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-calendar text-red-600 mr-2"></i> Pay Period
              Details
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Pay Cycle</label
                >
                <select
                  id="payCycle"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                  <option value="monthly">Monthly</option>
                  <option value="semi-monthly">
                    Semi-Monthly (Twice a month)
                  </option>
                  <option value="bi-weekly">Bi-Weekly (Every 2 weeks)</option>
                  <option value="weekly">Weekly</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Payslip Title</label
                >
                <input
                  type="text"
                  id="payslipTitle"
                  placeholder="e.g., Monthly Salary, Bi-Weekly Pay"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Period Start Date</label
                >
                <input
                  type="date"
                  id="periodStartDate"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Period End Date</label
                >
                <input
                  type="date"
                  id="periodEndDate"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Payment Date</label
                >
                <input
                  type="date"
                  id="paymentDate"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>

            <!-- Standard Deductions (Static per Pay Cycle) -->
            <div class="mt-4 bg-gray-50 p-4 rounded-lg">
              <h5 class="text-sm font-semibold text-gray-700 mb-3">
                <i class="fas fa-calculator mr-2"></i> Standard Deductions
              </h5>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-xs font-medium text-gray-600 mb-1"
                    >Welfare</label
                  >
                  <input
                    type="number"
                    id="welfare"
                    step="0.01"
                    min="0"
                    value="0"
                    onchange="calculateNetSalary()"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 mb-1"
                    >PAYE</label
                  >
                  <input
                    type="number"
                    id="paye"
                    step="0.01"
                    min="0"
                    value="0"
                    onchange="calculateNetSalary()"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 mb-1"
                    >Social Security</label
                  >
                  <input
                    type="number"
                    id="socialSecurity"
                    step="0.01"
                    min="0"
                    value="0"
                    onchange="calculateNetSalary()"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-600 mb-1"
                    >Health Insurance</label
                  >
                  <input
                    type="number"
                    id="healthInsurance"
                    step="0.01"
                    min="0"
                    value="0"
                    onchange="calculateNetSalary()"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Basic Salary -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Basic Salary *</label
            >
            <input
              type="number"
              id="basicSalary"
              step="0.01"
              min="0"
              required
              onchange="calculateNetSalary()"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>

          <!-- Allowances Section -->
          <div class="border-t pt-4">
            <h4
              class="text-lg font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-plus-circle text-green-600 mr-2"></i> Earning
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Housing</label
                >
                <input
                  type="number"
                  id="housingAllowance"
                  step="0.01"
                  min="0"
                  value="0"
                  onchange="calculateNetSalary()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Transport</label
                >
                <input
                  type="number"
                  id="transportAllowance"
                  step="0.01"
                  min="0"
                  value="0"
                  onchange="calculateNetSalary()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Benefits</label
                >
                <input
                  type="number"
                  id="benefits"
                  step="0.01"
                  min="0"
                  value="0"
                  onchange="calculateNetSalary()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Other</label
                >
                <input
                  type="number"
                  id="otherAllowances"
                  step="0.01"
                  min="0"
                  value="0"
                  onchange="calculateNetSalary()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>

            <!-- Custom Allowances -->
            <div class="mt-4">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Custom Earnings</label
                >
                <button
                  type="button"
                  onclick="addCustomAllowance()"
                  class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition duration-200"
                >
                  <i class="fas fa-plus mr-1"></i> Add Custom
                </button>
              </div>
              <div id="customEarningsList" class="space-y-2"></div>
            </div>

            <div
              class="mt-3 p-3 bg-green-50 rounded-lg border border-green-200"
            >
              <p class="text-sm text-gray-700">
                Total Earnings:
                <span id="totalEarningsDisplay" class="font-bold text-green-700"
                  >GH0.00</span
                >
              </p>
            </div>
          </div>

          <!-- Additional Deductions Section -->
          <div class="border-t pt-4">
            <h4
              class="text-lg font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-minus-circle text-red-600 mr-2"></i> Additional
              Deductions
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Other Deductions</label
                >
                <input
                  type="number"
                  id="otherDeductions"
                  step="0.01"
                  min="0"
                  value="0"
                  onchange="calculateNetSalary()"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                />
              </div>
            </div>

            <!-- Custom Deductions -->
            <div class="mt-4">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Custom Deductions</label
                >
                <button
                  type="button"
                  onclick="addCustomDeduction()"
                  class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition duration-200"
                >
                  <i class="fas fa-plus mr-1"></i> Add Custom
                </button>
              </div>
              <div id="customDeductionsList" class="space-y-2"></div>
              <div class="mt-2 text-xs text-gray-600 italic">
                <i class="fas fa-info-circle mr-1"></i> You can add recurring
                deductions (e.g., salary advances) that auto-deduct over
                multiple months
              </div>
            </div>

            <div class="mt-3 p-3 bg-red-50 rounded-lg border border-red-200">
              <p class="text-sm text-gray-700">
                Total Deductions:
                <span id="totalDeductionsDisplay" class="font-bold text-red-700"
                  >GH0.00</span
                >
              </p>
            </div>
          </div>

          <!-- Net Salary Summary -->
          <div class="border-t pt-4">
            <div
              class="p-4 bg-gradient-to-r from-red-50 to-blue-50 rounded-lg border border-red-200"
            >
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                <div>
                  <p class="text-xs text-gray-600 mb-1">Gross Salary</p>
                  <p
                    id="grossSalaryDisplay"
                    class="text-xl font-bold text-gray-800"
                  >
                    GH0.00
                  </p>
                </div>
                <div>
                  <p class="text-xs text-gray-600 mb-1">Total Deductions</p>
                  <p
                    id="totalDeductionsSummary"
                    class="text-xl font-bold text-red-600"
                  >
                    GH0.00
                  </p>
                </div>
                <div>
                  <p class="text-xs text-gray-600 mb-1">Net Salary</p>
                  <p
                    id="netSalaryDisplay"
                    class="text-2xl font-bold text-green-600"
                  >
                    GH0.00
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closePayrollModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200"
            >
              <i class="fas fa-save mr-2"></i> Save Payroll
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Custom Allowance Modal -->
    <div id="customAllowanceModal" class="modal">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-xl font-bold text-gray-800">Add Custom Allowance</h3>
          <button
            onclick="closeCustomAllowanceModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="customAllowanceForm" class="p-6 space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Allowance Name *</label
            >
            <input
              type="text"
              id="allowanceName"
              required
              placeholder="e.g., Performance Bonus, Travel Allowance"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Amount *</label
            >
            <input
              type="number"
              id="allowanceAmount"
              step="0.01"
              min="0"
              required
              placeholder="0.00"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
            />
          </div>
          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closeCustomAllowanceModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition duration-200"
            >
              <i class="fas fa-plus mr-2"></i> Add Allowance
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Custom Deduction Modal -->
    <div id="customDeductionModal" class="modal">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <div class="flex justify-between items-center p-6 border-b">
          <h3 class="text-xl font-bold text-gray-800">Add Custom Deduction</h3>
          <button
            onclick="closeCustomDeductionModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <form id="customDeductionForm" class="p-6 space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Deduction Name *</label
            >
            <input
              type="text"
              id="deductionName"
              required
              placeholder="e.g., Loan Repayment, Uniform, Salary Advance"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Amount *</label
            >
            <input
              type="number"
              id="deductionAmount"
              step="0.01"
              min="0"
              required
              placeholder="0.00"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
          </div>
          <div class="border-t pt-4">
            <label class="flex items-center space-x-2 cursor-pointer">
              <input
                type="checkbox"
                id="isRecurring"
                class="w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500"
              />
              <span class="text-sm font-medium text-gray-700"
                >This is a recurring deduction</span
              >
            </label>
            <p class="text-xs text-gray-500 mt-1 ml-7">
              For salary advances that need to be deducted over multiple months
            </p>
          </div>
          <div id="recurringMonthsContainer" class="hidden">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Number of Months *</label
            >
            <input
              type="number"
              id="recurringMonths"
              min="1"
              max="24"
              placeholder="e.g., 3, 6, 12"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            />
            <p class="text-xs text-gray-500 mt-1">
              This deduction will be automatically applied for this many months
            </p>
          </div>
          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="closeCustomDeductionModal()"
              class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200"
            >
              <i class="fas fa-plus mr-2"></i> Add Deduction
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Details Modal -->
    <div id="detailsModal" class="modal">
      <div
        class="bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden flex flex-col"
        style="animation: slideUp 0.3s ease-out"
      >
        <!-- Modern Header -->
        <div
          class="bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"
        >
          <div class="flex items-center space-x-3">
            <div
              class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center"
            >
              <i class="fas fa-file-alt text-red-600 text-sm"></i>
            </div>
            <h3
              class="text-lg font-semibold text-gray-800"
              id="detailsModalTitle"
            >
              Record Details
            </h3>
          </div>
          <button
            onclick="closeDetailsModal()"
            class="text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg p-2 transition-all duration-200"
          >
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <!-- Clean Content Area -->
        <div
          class="overflow-y-auto flex-1 px-6 py-5 bg-white"
          id="detailsModalContent"
          style="scrollbar-width: thin; scrollbar-color: #cbd5e0 #f7fafc"
        >
          <!-- Content will be dynamically inserted here -->
        </div>

        <!-- Simple Footer -->
        <div
          class="bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200"
        >
          <button onclick="closeDetailsModal()" class="button button-red">
            <i class="fas fa-times mr-2"></i> Close
          </button>
        </div>
      </div>
    </div>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

    <script src="cloudinary-config.js"></script>
    <script src="assets/js/admin.js?v=37"></script>
    <script src="upcoming-leaves.js?v=1"></script>

    <script>
      // Mobile menu toggle function
      function toggleMobileMenu() {
        const mobileMenu = document.getElementById("mobileMenu");
        if (mobileMenu) {
          mobileMenu.classList.toggle("hidden");
        }
      }
    </script>
  </body>
</html>
